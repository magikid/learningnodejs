{"ts":1347977293726,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var formidable = require('formidable'),\r\n    http = require('http'),\r\n    sys = require('sys');\r\n\r\nhttp.createServer(function(req, res) {\r\n  if (req.url == '/upload' && req.method.toLowerCase() == 'post') {\r\n    // parse a file upload\r\n    var form = new formidable.IncomingForm();\r\n    form.parse(req, function(err, fields, files) {\r\n      res.writeHead(200, {'content-type': 'text/plain'});\r\n      res.write('received upload:\\n\\n');\r\n      res.end(sys.inspect({fields: fields, files: files}));\r\n    });\r\n    return;\r\n  }\r\n\r\n  // show a file upload form\r\n  res.writeHead(200, {'content-type': 'text/html'});\r\n  res.end(\r\n    '<form action=\"/upload\" enctype=\"multipart/form-data\" '+\r\n    'method=\"post\">'+\r\n    '<input type=\"text\" name=\"title\"><br>'+\r\n    '<input type=\"file\" name=\"upload\" multiple=\"multiple\"><br>'+\r\n    '<input type=\"submit\" value=\"Upload\">'+\r\n    '</form>'\r\n  );\r\n}).listen(process.env.PORT);"]],"start1":0,"start2":0,"length1":0,"length2":912}]],"length":912}
